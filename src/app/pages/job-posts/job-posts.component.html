<div
  *ngIf="isLoading"
  class="pause d-flex align-items-center justify-content-center"
>
  <div class="spinner"></div>
</div>

<div
  class="border-bottom tolbar mb-5 px-4 d-flex align-items-stretch justify-content-between"
>
  <ul class="nav nav-line-tabs nav-line-tabs-1x nav-stretch qt-nav">
    <li class="nav-item">
      <a
        data-bs-toggle="tab"
        class="nav-link px-4 fw-semibold"
        (click)="reqParam.status = 'ACTIVE'; changeStatus()"
        [ngClass]="{
          active: reqParam.status === 'ACTIVE',
          'cursor-pointer': reqParam.status !== 'ACTIVE'
        }"
      >
        New Jobs
        <span class="badge badge-light-primary ms-3">
          <i class="bi bi-arrow-down-left px-1 text-primary fs-9 me-2"></i>
          {{ jobCount?.activeJobPost }}</span
        >
      </a>
    </li>

    <li class="nav-item">
      <a
        data-bs-toggle="tab"
        class="nav-link px-4 fw-semibold"
        (click)="reqParam.status = 'APPLIED'; changeStatus()"
        [ngClass]="{
          active: reqParam.status === 'APPLIED',
          'cursor-pointer': reqParam.status !== 'APPLIED'
        }"
      >
        Applied Jobs
        <span class="badge badge-light-warning ms-3"
          ><i class="bi bi-arrow-up-right px-1 text-warning fs-9 me-2"></i>
          {{ jobCount?.appliedJobCount }}</span
        ></a
      >
    </li>
    <li class="nav-item">
      <a
        data-bs-toggle="tab"
        class="nav-link px-4 fw-semibold"
        (click)="reqParam.status = 'CONFIRMED'; changeStatus()"
        [ngClass]="{
          active: reqParam.status === 'CONFIRMED',
          'cursor-pointer': reqParam.status !== 'CONFIRMED'
        }"
      >
        Confirmed Jobs
        <span class="badge badge-light-success ms-3"
          ><i class="bi bi-check2-circle fs-7 me-2"></i>
          {{ jobCount?.confirmedJobCount }}</span
        ></a
      >
    </li>
  </ul>
</div>
<div class="row g-xl-12 mb-5 mb-xl-12">
  <div class="w-250px text-gray-600 h-100">
    <div class="card p-4 fs-6">
      <div class="position-relative input-icon">
        <input
          type="text"
          class="form-control py-2 fs- fw-normal px-11"
          [(ngModel)]="reqParam.searchText"
          placeholder="Search for a Job"
          (keyup)="
            reqParam.searchText && reqParam.searchText.length > 2
              ? searchFilter()
              : !reqParam.searchText || reqParam.searchText.length === 0
              ? searchFilter()
              : ''
          "
        />
        <span><i class="fa fa-search"></i></span>
        <span
          class="cursor-pointer text-active-primary pspinpClose"
          (click)="
            reqParam.searchText = '';
            reqParam.pageNo = 1;
            reqParam.pageSize = 10;
            getAllJobs()
          "
          *ngIf="reqParam.searchText && reqParam.searchText !== ''"
        >
          <i class="bi bi-x-lg text-active-primary"></i
        ></span>
      </div>

      <div class="py-4">
        Filter by
        <a class="px-4 cursor-pointer" (click)="reloadTable()">Reset Filters</a>
      </div>
      <div class="separator mb-5"></div>
      <div class="fs-8 text-muted mb-5">Job Type</div>
      <mat-checkbox
        color="primary"
        [checked]="selectAllJobTypes"
        [(ngModel)]="selectAllJobTypes"
        value="All"
        (change)="filterJobType($event, -1)"
      >
        All
      </mat-checkbox>
      <label *ngFor="let types of jobTypes; let index = index">
        <mat-checkbox
          color="primary"
          [checked]="selectedJobTypes[index]"
          [(ngModel)]="selectedJobTypes[index]"
          [value]="types.code"
          (change)="filterJobType($event, index)"
        >
          {{ types.name }}
        </mat-checkbox>
      </label>
      <ng-container *ngIf="reqParam.status === 'APPLIED'">
        <div class="fs-8 text-muted mb-2 mt-5">JOB Status</div>

        <mat-checkbox
          color="primary"
          [checked]="selectedJobStatusAll"
          [(ngModel)]="selectedJobStatusAll"
          value="All"
          (change)="filterJobStatus($event, -1)"
        >
          All Types
        </mat-checkbox>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="OFFER_SENT"
            [checked]="selectedJobStatus[0]"
            [(ngModel)]="selectedJobStatus[0]"
            (change)="filterJobStatus($event, 0)"
          >
            Offer Sent
          </mat-checkbox>
        </label>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="HOLD"
            [checked]="selectedJobStatus[1]"
            [(ngModel)]="selectedJobStatus[1]"
            (change)="filterJobStatus($event, 1)"
          >
            On Hold
          </mat-checkbox>
        </label>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="REJECTED"
            [checked]="selectedJobStatus[2]"
            [(ngModel)]="selectedJobStatus[2]"
            (change)="filterJobStatus($event, 2)"
          >
            Rejected
          </mat-checkbox>
        </label>
      </ng-container>
      <div class="separator separator-dashed my-5"></div>
      <div class="fs-8 text-muted mb-2">PAY RATE</div>

      <mat-checkbox
        color="primary"
        [checked]="selectedJobKindAll"
        value="All"
        [(ngModel)]="selectedJobKindAll"
        (change)="filterJobKind($event, -1)"
      >
        All
      </mat-checkbox>

      <label
        class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
      >
        <mat-checkbox
          color="primary"
          value="Hourly"
          [checked]="selectedJobKind[0]"
          [(ngModel)]="selectedJobKind[0]"
          (change)="filterJobKind($event, 0)"
        >
          Hour Based
        </mat-checkbox>
      </label>
      <label
        class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
      >
        <mat-checkbox
          color="primary"
          value="Fixed"
          [checked]="selectedJobKind[1]"
          [(ngModel)]="selectedJobKind[1]"
          (change)="filterJobKind($event, 1)"
        >
          Fixed
        </mat-checkbox>
      </label>
      <div class="separator separator-dashed my-5"></div>

      <div class="fs-8 text-muted mb-3">Work Area</div>
      <div class="mb-5">
        <mat-select
          class="form-select fs- py-2"
          placeholder="Select Site"
          [(value)]="reqParam.site"
          [(ngModel)]="reqParam.site"
          (selectionChange)="searchFilter()"
        >
          <!-- <mat-option value="">All</mat-option> -->
          <mat-option *ngFor="let sites of sitesList" [value]="sites.code">
            {{ sites.name }} ({{ sites.code }})
          </mat-option>
        </mat-select>
      </div>
      <div class="mb-5">
        <mat-select
          class="form-select fs- py-2"
          placeholder="Select Business Unit"
          [(value)]="reqParam.businessUnit"
          [(ngModel)]="reqParam.businessUnit"
          (selectionChange)="searchFilter()"
        >
          <!-- <mat-option value="">All</mat-option> -->
          <mat-option *ngFor="let units of businessUnits" [value]="units.code">
            {{ units.name }}
          </mat-option>
        </mat-select>
      </div>
      <!-- <label *ngFor="let types of jobTypes; let index = index">
        <mat-checkbox
          color="primary"
          [checked]="selectedJobTypes[index]"
          [value]="types.code"
          (change)="filterJobType($event, index)"
        >
          {{ types.name }}
        </mat-checkbox>
      </label> -->
      <!-- <div class="fs-8 text-muted mb-5">Job Type</div>

      <mat-checkbox
        color="primary"
        [checked]="selected"
        value="All"
        (change)="filterJobType($event, -1)"
      >
        All
      </mat-checkbox>

      <label *ngFor="let types of jobTypes; let index = index">
        <mat-checkbox
          color="primary"
          [checked]="selectedJobTypes[index]"
          [value]="types.code"
          (change)="filterJobType($event, index)"
        >
          {{ types.name }}
        </mat-checkbox>
      </label>

      <ng-container *ngIf="queryParam.status === ''">
        <div class="fs-8 text-muted mb-2 mt-5">JOB Status</div>

        <mat-checkbox
          color="primary"
          [checked]="selectedJobStatusAll"
          value="All"
          (change)="filterJobStatus($event, -1)"
        >
          All Types
        </mat-checkbox>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="OfferSent"
            [checked]="selectedJobStatus[0]"
            (change)="filterJobStatus($event, 0)"
          >
            Offer Sent
          </mat-checkbox>
        </label>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="OnHold"
            [checked]="selectedJobStatus[1]"
            (change)="filterJobStatus($event, 1)"
          >
            On Hold
          </mat-checkbox>
        </label>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="Rejected"
            [checked]="selectedJobStatus[2]"
            (change)="filterJobStatus($event, 2)"
          >
            Rejected
          </mat-checkbox>
        </label>
      </ng-container>

      <div class="separator separator-dashed my-5"></div>
      <div class="fs-8 text-muted mb-2">PAY RATE</div>

      <mat-checkbox
        color="primary"
        [checked]="selectedJobKindAll"
        value="All"
        (change)="filterJobKind($event, -1)"
      >
        All
      </mat-checkbox>

      <label
        class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
      >
        <mat-checkbox
          color="primary"
          value="Hourly"
          [checked]="selectedJobKind[0]"
          (change)="filterJobKind($event, 0)"
        >
          Hour Based
        </mat-checkbox>
      </label>
      <label
        class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
      >
        <mat-checkbox
          color="primary"
          value="Fixed"
          [checked]="selectedJobKind[1]"
          (change)="filterJobKind($event, 1)"
        >
          Fixed
        </mat-checkbox>
      </label>

      <div class="separator separator-dashed my-5"></div>

      <div class="fs-8 text-muted mb-3">Work Area</div>
      <div class="mb-5">
        <mat-select
          class="form-select fs- py-2"
          placeholder="Select Site"
          [(value)]="filter.site"
          (selectionChange)="filterSite($event)"
        >
          <mat-option *ngFor="let sites of sitesList" [value]="sites.code">
            {{ sites.name }} ({{ sites.code }})
          </mat-option>
        </mat-select>
      </div>
      <div class="mb-5">
        <mat-select
          class="form-select fs- py-2"
          placeholder="Select Business Unit"
          [(value)]="filter.businessUnit"
          (selectionChange)="filterBusinessUnit($event)"
        >
          <mat-option *ngFor="let units of businessUnits" [value]="units.code">
            {{ units.name }}
          </mat-option>
        </mat-select>
      </div> -->
      <div class="separator separator-dashed mb-5"></div>
    </div>
  </div>
  <div class="col">
    <ng-container *ngIf="reqParam.status === 'ACTIVE'">
      <ng-container *ngFor="let details of jobDetails">
        <div class="card mb-2">
          <div class="card-body py-5">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap"
            >
              <div class="d-flex flex-column w-75">
                <h6 class="text-dark text-gray-800 fs-3 me-1">
                  {{ details.title }}
                </h6>
                <div class="d-flex">
                  <a
                    class="fw-bold display-inline cursor-pointer"
                    (click)="goToDetails(details.id)"
                  >
                    #{{ details.id }}</a
                  >
                </div>
                <span class="fs-7 text-muted mt-1 mb-5"
                  >created on
                  {{ details.registerDate | date : "dd MMM, yyyy" }}</span
                >

                <div class="d-flex flex-wrap flex-stack">
                  <div class="d-flex flex-column flex-grow-1 pe-8">
                    <div class="d-flex flex-wrap lign-items-center">
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">{{
                          details.jobKind === "Fixed"
                            ? "Budget"
                            : "Working Rate"
                        }}</span>
                        <span class="fw-bold d-flex"
                          >{{
                            details.jobKind === "Fixed"
                              ? (details.minBudget | number : "1.2-2") +
                                " ~ " +
                                (details.maxBudget | number : "1.2-2")
                              : (details.rate | number : "1.2-2")
                          }}
                          {{ details.currency }}</span
                        >
                      </div>

                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8"
                          >Business Unit</span
                        >
                        <span class="fw-bold d-flex">{{
                          details.businessUnit
                        }}</span>
                      </div>
                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">Site</span>
                        <span class="fw-bold d-flex">{{ details.site }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-175px">
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img
                      class=""
                      src="./assets/images/icons/calendar.svg"
                      alt=""
                    />
                  </div>
                  {{ details.startDate | date : "MMM dd" }} -
                  {{ details.endDate | date : "dd MMM, yyyy" }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/coin.svg" alt="" />
                  </div>
                  {{ details.jobKind }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/case.svg" alt="" />
                  </div>
                  {{ details.type }}
                </div>
                <a
                  class="btn btn-primary btn-sm cursor-pointer mt-3"
                  (click)="goToDetails(details.id)"
                >
                  Apply Now</a
                >
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="reqParam.status === 'APPLIED'">
      <ng-container *ngFor="let details of jobDetails">
        <div class="card mb-2 cursor-pointer" (click)="goToDetails(details.id)">
          <div class="card-body py-5">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap"
            >
              <div class="d-flex flex-column w-75">
                <h6 class="text-dark text-gray-800 fs-3 me-1">
                  {{ details.title }}
                </h6>
                <div class="d-flex">
                  <a class="cursor-pointer fw-bold display-inline">
                    #{{ details.id }}</a
                  >
                  <span class="badge badge-light-success fw-normal ms-3"
                    ><i
                      class="fas fa-yin-yangfas fa-circle px-1 text-success fs-10"
                    ></i>
                    {{ details.jobApplicationDetails?.displayStatus }}
                  </span>
                </div>
                <span class="fs-7 text-muted mt-1 mb-5"
                  >created on
                  {{ details.registerDate | date : "dd MMM, yyyy" }}</span
                >

                <div class="d-flex flex-wrap flex-stack">
                  <div class="d-flex flex-column flex-grow-1 pe-8">
                    <div
                      class="d-flex flex-wrap lign-items-center text-gray-700"
                    >
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">{{
                          details.jobKind === "Fixed"
                            ? "Budget"
                            : "Working Rate"
                        }}</span>
                        <span class="fw-bold d-flex"
                          >{{
                            details.jobKind === "Fixed"
                              ? (details.minBudget | number : "1.2-2") +
                                " ~ " +
                                (details.maxBudget | number : "1.2-2")
                              : (details.rate | number : "1.2-2")
                          }}
                          {{ details.currency }}</span
                        >
                      </div>

                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8"
                          >Business Unit</span
                        >
                        <span class="fw-bold d-flex">{{
                          details.businessUnit
                        }}</span>
                      </div>
                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">Site</span>
                        <span class="fw-bold d-flex">{{ details.site }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-175px">
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img
                      class=""
                      src="./assets/images/icons/calendar.svg"
                      alt=""
                    />
                  </div>
                  {{ details.startDate | date : "MMM dd" }} -
                  {{ details.endDate | date : "dd MMM, yyyy" }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/coin.svg" alt="" />
                  </div>
                  {{ details.jobKind }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/case.svg" alt="" />
                  </div>
                  {{ details.type }}
                </div>
                <div class="mt-4 d-flex">
                  <div class="symbol symbol-35px symbol-circle me-3">
                    <img
                      [src]="
                        details.profile ||
                        '../../../../assets/media/avatars/blank.png'
                      "
                      alt="profile-pic"
                    />
                  </div>

                  <div>
                    <span class="d-flex text-muted fs-8">Worker</span>
                    <span class="fw-bold d-flex s-"
                      >{{ details.jobApplicationDetails?.firstName }}
                      {{ details.jobApplicationDetails?.lastName }}</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="reqParam.status === 'CONFIRMED'">
      <ng-container *ngFor="let details of jobDetails">
        <div class="card mb-2">
          <div class="card-body py-5">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap"
            >
              <div class="d-flex flex-column w-75">
                <h6 class="text-dark text-gray-800 fs-3 me-1">
                  {{ details.title }}
                </h6>
                <div class="d-flex">
                  <a
                    class="fw-bold cursor-pointer display-inline"
                    (click)="goToDetails(details.id)"
                  >
                    #{{ details.id }}</a
                  >
                </div>
                <span class="fs-7 text-muted mt-1 mb-5"
                  >created on
                  {{ details.registerDate | date : "dd MMM, yyyy" }}</span
                >

                <div class="d-flex flex-wrap flex-stack">
                  <div class="d-flex flex-column flex-grow-1 pe-8">
                    <div
                      class="d-flex flex-wrap lign-items-center text-gray-700"
                    >
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">{{
                          details.jobKind === "Fixed"
                            ? "Budget"
                            : "Working Rate"
                        }}</span>
                        <span class="fw-bold d-flex"
                          >{{
                            details.jobKind === "Fixed"
                              ? (details.minBudget | number : "1.2-2") +
                                " ~ " +
                                (details.maxBudget | number : "1.2-2")
                              : (details.rate | number : "1.2-2")
                          }}
                          {{ details.currency }}</span
                        >
                      </div>

                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8"
                          >Business Unit</span
                        >
                        <span class="fw-bold d-flex">{{
                          details.businessUnit
                        }}</span>
                      </div>
                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">Site</span>
                        <span class="fw-bold d-flex">{{ details.site }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-175px">
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img
                      class=""
                      src="./assets/images/icons/calendar.svg"
                      alt=""
                    />
                  </div>
                  {{ details.startDate | date : "MMM dd" }} -
                  {{ details.endDate | date : "dd MMM, yyyy" }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/coin.svg" alt="" />
                  </div>
                  {{ details.jobKind }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/case.svg" alt="" />
                  </div>
                  {{ details.type }}
                </div>
                <div class="mt-4 d-flex">
                  <div class="symbol symbol-35px symbol-circle me-3">
                    <img
                      [src]="
                        details.profile ||
                        '../../../../assets/media/avatars/blank.png'
                      "
                      alt="profile-pic"
                    />
                  </div>
                  <div>
                    <span class="d-flex text-muted fs-8">Worker</span>
                    <span class="fw-bold d-flex s-"
                      >{{ details.jobApplicationDetails?.firstName }}
                      {{ details.jobApplicationDetails?.lastName }}</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <div
      *ngIf="apiLoad && jobDetails.length === 0"
      class="fw-semibold fs-3 min-h-sm-350px d-flex align-items-center justify-content-center"
    >
      No Records Found
    </div>

    <mat-paginator
      *ngIf="jobDetails.length > 0"
      [pageSize]="reqParam.pageSize"
      [pageSizeOptions]="[5, 10, 20, 30]"
      [length]="totalJobCount"
      (page)="onPageChange($event)"
    >
    </mat-paginator>
  </div>
</div>
<!-- <div
  class="border-bottom tolbar mb-5 px-4 d-flex align-items-stretch justify-content-between"
>
  <ul class="nav nav-line-tabs nav-line-tabs-1x nav-stretch qt-nav">
    <li class="nav-item">
      <a
        data-bs-toggle="tab"
        class="nav-link px-4 fw-semibold"
        (click)="queryParam.status = 'ACTIVE'; getSelectedTab()"
        [ngClass]="{
          active: queryParam.status === 'ACTIVE',
          'cursor-pointer': queryParam.status !== 'ACTIVE'
        }"
      >
        New Jobs
        <span class="badge badge-light-primary ms-3">
          <i class="bi bi-arrow-down-left px-1 text-primary fs-9 me-2"></i>
          {{ jobCount?.activeJobPost }}</span
        >
      </a>
    </li>

    <li class="nav-item">
      <a
        data-bs-toggle="tab"
        class="nav-link px-4 fw-semibold"
        (click)="queryParam.status = ''; getSelectedTab()"
        [ngClass]="{
          active: queryParam.status === '',
          'cursor-pointer': queryParam.status !== ''
        }"
      >
        Applied Jobs
        <span class="badge badge-light-warning ms-3"
          ><i class="bi bi-arrow-up-right px-1 text-warning fs-9 me-2"></i>
          {{ jobCount?.appliedJobCount }}</span
        ></a
      >
    </li>
    <li class="nav-item">
      <a
        data-bs-toggle="tab"
        class="nav-link px-4 fw-semibold"
        (click)="queryParam.status = 'CONFIRMED'; getSelectedTab()"
        [ngClass]="{
          active: queryParam.status === 'CONFIRMED',
          'cursor-pointer': queryParam.status !== 'CONFIRMED'
        }"
      >
        Confirmed Jobs
        <span class="badge badge-light-success ms-3"
          ><i class="bi bi-check2-circle fs-7 me-2"></i>
          {{ jobCount?.confirmedJobCount }}</span
        ></a
      >
    </li>
  </ul>
</div>
<div class="row g-xl-12 mb-5 mb-xl-12">
  <div class="w-250px text-gray-600 h-100">
    <div class="card p-4 fs-6">
      <div class="position-relative input-icon">
        <input
          type="text"
          class="form-control py-2 fs- fw-normal px-11"
          [(ngModel)]="filter.searchText"
          placeholder="Search for a Job"
          (keyup)="searchFilter($event)"
        />
        <span><i class="fa fa-search"></i></span>
        <span
          class="cursor-pointer text-active-primary pspinpClose"
          (click)="filter.searchText = ''; clearSearch()"
          *ngIf="filter.searchText && filter.searchText !== ''"
        >
          <i class="bi bi-x-lg text-active-primary"></i
        ></span>
      </div>

      <div class="py-4">
        Filter by
        <a class="px-4 cursor-pointer" (click)="resetFilter()">Reset Filters</a>
      </div>
      <div class="separator mb-5"></div>

      <div class="fs-8 text-muted mb-5">Job Type</div>

      <mat-checkbox
        color="primary"
        [checked]="selected"
        value="All"
        (change)="filterJobType($event, -1)"
      >
        All
      </mat-checkbox>

      <label *ngFor="let types of jobTypes; let index = index">
        <mat-checkbox
          color="primary"
          [checked]="selectedJobTypes[index]"
          [value]="types.code"
          (change)="filterJobType($event, index)"
        >
          {{ types.name }}
        </mat-checkbox>
      </label>

      <ng-container *ngIf="queryParam.status === ''">
        <div class="fs-8 text-muted mb-2 mt-5">JOB Status</div>

        <mat-checkbox
          color="primary"
          [checked]="selectedJobStatusAll"
          value="All"
          (change)="filterJobStatus($event, -1)"
        >
          All Types
        </mat-checkbox>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="OfferSent"
            [checked]="selectedJobStatus[0]"
            (change)="filterJobStatus($event, 0)"
          >
            Offer Sent
          </mat-checkbox>
        </label>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="OnHold"
            [checked]="selectedJobStatus[1]"
            (change)="filterJobStatus($event, 1)"
          >
            On Hold
          </mat-checkbox>
        </label>
        <label
          class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
        >
          <mat-checkbox
            color="primary"
            value="Rejected"
            [checked]="selectedJobStatus[2]"
            (change)="filterJobStatus($event, 2)"
          >
            Rejected
          </mat-checkbox>
        </label>
      </ng-container>

      <div class="separator separator-dashed my-5"></div>
      <div class="fs-8 text-muted mb-2">PAY RATE</div>

      <mat-checkbox
        color="primary"
        [checked]="selectedJobKindAll"
        value="All"
        (change)="filterJobKind($event, -1)"
      >
        All
      </mat-checkbox>

      <label
        class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
      >
        <mat-checkbox
          color="primary"
          value="Hourly"
          [checked]="selectedJobKind[0]"
          (change)="filterJobKind($event, 0)"
        >
          Hour Based
        </mat-checkbox>
      </label>
      <label
        class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary"
      >
        <mat-checkbox
          color="primary"
          value="Fixed"
          [checked]="selectedJobKind[1]"
          (change)="filterJobKind($event, 1)"
        >
          Fixed
        </mat-checkbox>
      </label>

      <div class="separator separator-dashed my-5"></div>

      <div class="fs-8 text-muted mb-3">Work Area</div>
      <div class="mb-5">
        <mat-select
          class="form-select fs- py-2"
          placeholder="Select Site"
          [(value)]="filter.site"
          (selectionChange)="filterSite($event)"
        >
          <mat-option *ngFor="let sites of sitesList" [value]="sites.code">
            {{ sites.name }} ({{ sites.code }})
          </mat-option>
        </mat-select>
      </div>
      <div class="mb-5">
        <mat-select
          class="form-select fs- py-2"
          placeholder="Select Business Unit"
          [(value)]="filter.businessUnit"
          (selectionChange)="filterBusinessUnit($event)"
        >
          <mat-option *ngFor="let units of businessUnits" [value]="units.code">
            {{ units.name }}
          </mat-option>
        </mat-select>
      </div>
      <div class="separator separator-dashed mb-5"></div>
    </div>
  </div>

  <div class="col">
    <ng-container *ngIf="queryParam.status === 'ACTIVE'">
      <ng-container *ngFor="let details of jobDetails">
        <div class="card mb-2">
          <div class="card-body py-5">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap"
            >
              <div class="d-flex flex-column w-75">
                <h6 class="text-dark text-gray-800 fs-3 me-1">
                  {{ details.title }}
                </h6>
                <div class="d-flex">
                  <a
                    class="fw-bold display-inline cursor-pointer"
                    (click)="goToDetails(details.id)"
                  >
                    #{{ details.id }}</a
                  >
                </div>
                <span class="fs-7 text-muted mt-1 mb-5"
                  >created on
                  {{ details.registerDate | date : "dd MMM, yyyy" }}</span
                >

                <div class="d-flex flex-wrap flex-stack">
                  <div class="d-flex flex-column flex-grow-1 pe-8">
                    <div class="d-flex flex-wrap lign-items-center">
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">{{
                          details.jobKind === "Fixed"
                            ? "Budget"
                            : "Working Rate"
                        }}</span>
                        <span class="fw-bold d-flex"
                          >{{
                            details.jobKind === "Fixed"
                              ? details.minBudget + " ~ " + details.maxBudget
                              : details.rate
                          }}
                          {{ details.currency }}</span
                        >
                      </div>

                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8"
                          >Business Unit</span
                        >
                        <span class="fw-bold d-flex">{{
                          details.businessUnit
                        }}</span>
                      </div>
                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">Site</span>
                        <span class="fw-bold d-flex">{{ details.site }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-175px">
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img
                      class=""
                      src="./assets/images/icons/calendar.svg"
                      alt=""
                    />
                  </div>
                  {{ details.startDate | date : "MMM dd" }} -
                  {{ details.endDate | date : "dd MMM, yyyy" }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/coin.svg" alt="" />
                  </div>
                  {{ details.jobKind }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/case.svg" alt="" />
                  </div>
                  {{ details.type }}
                </div>
                <a
                  class="btn btn-primary btn-sm cursor-pointer mt-3"
                  (click)="goToDetails(details.id)"
                >
                  Apply Now</a
                >
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="queryParam.status === ''">
      <ng-container *ngFor="let details of jobDetails">
        <div class="card mb-2 cursor-pointer" (click)="goToDetails(details.id)">
          <div class="card-body py-5">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap"
            >
              <div class="d-flex flex-column w-75">
                <h6 class="text-dark text-gray-800 fs-3 me-1">
                  {{ details.title }}
                </h6>
                <div class="d-flex">
                  <a class="cursor-pointer fw-bold display-inline">
                    #{{ details.id }}</a
                  >
                  <span class="badge badge-light-success fw-normal ms-3"
                    ><i
                      class="fas fa-yin-yangfas fa-circle px-1 text-success fs-10"
                    ></i>
                    {{ details.jobApplicationDetails?.displayStatus }}
                  </span>
                </div>
                <span class="fs-7 text-muted mt-1 mb-5"
                  >created on
                  {{ details.registerDate | date : "dd MMM, yyyy" }}</span
                >

                <div class="d-flex flex-wrap flex-stack">
                  <div class="d-flex flex-column flex-grow-1 pe-8">
                    <div
                      class="d-flex flex-wrap lign-items-center text-gray-700"
                    >
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">{{
                          details.jobKind === "Fixed"
                            ? "Budget"
                            : "Working Rate"
                        }}</span>
                        <span class="fw-bold d-flex"
                          >{{
                            details.jobKind === "Fixed"
                              ? details.minBudget + " ~ " + details.maxBudget
                              : details.rate
                          }}
                          {{ details.currency }}</span
                        >
                      </div>

                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8"
                          >Business Unit</span
                        >
                        <span class="fw-bold d-flex">{{
                          details.businessUnit
                        }}</span>
                      </div>
                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">Site</span>
                        <span class="fw-bold d-flex">{{ details.site }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-175px">
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img
                      class=""
                      src="./assets/images/icons/calendar.svg"
                      alt=""
                    />
                  </div>
                  {{ details.startDate | date : "MMM dd" }} -
                  {{ details.endDate | date : "dd MMM, yyyy" }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/coin.svg" alt="" />
                  </div>
                  {{ details.jobKind }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/case.svg" alt="" />
                  </div>
                  {{ details.type }}
                </div>
                <div class="mt-4 d-flex">
                  <div class="symbol symbol-35px symbol-circle me-3">
                    <img
                      [src]="
                        details.profile ||
                        '../../../assets/media/avatars/300-12.jpg'
                      "
                      alt="profile-pic"
                    />
                  </div>

                  <div>
                    <span class="d-flex text-muted fs-8">Worker</span>
                    <span class="fw-bold d-flex s-"
                      >{{ details.jobApplicationDetails?.firstName }}
                      {{ details.jobApplicationDetails?.lastName }}</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="queryParam.status === 'CONFIRMED'">
      <ng-container *ngFor="let details of jobDetails">
        <div class="card mb-2">
          <div class="card-body py-5">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap"
            >
              <div class="d-flex flex-column w-75">
                <h6 class="text-dark text-gray-800 fs-3 me-1">
                  {{ details.title }}
                </h6>
                <div class="d-flex">
                  <a
                    class="fw-bold cursor-pointer display-inline"
                    (click)="goToDetails(details.id)"
                  >
                    #{{ details.id }}</a
                  >
                </div>
                <span class="fs-7 text-muted mt-1 mb-5"
                  >created on
                  {{ details.registerDate | date : "dd MMM, yyyy" }}</span
                >

                <div class="d-flex flex-wrap flex-stack">
                  <div class="d-flex flex-column flex-grow-1 pe-8">
                    <div
                      class="d-flex flex-wrap lign-items-center text-gray-700"
                    >
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">{{
                          details.jobKind === "Fixed"
                            ? "Budget"
                            : "Working Rate"
                        }}</span>
                        <span class="fw-bold d-flex"
                          >{{
                            details.jobKind === "Fixed"
                              ? details.minBudget + " ~ " + details.maxBudget
                              : details.rate
                          }}
                          {{ details.currency }}</span
                        >
                      </div>

                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8"
                          >Business Unit</span
                        >
                        <span class="fw-bold d-flex">{{
                          details.businessUnit
                        }}</span>
                      </div>
                      <div class="vr me-5 mt-4 h-20px"></div>
                      <div class="me-10 my-1">
                        <span class="d-flex text-muted fs-8">Site</span>
                        <span class="fw-bold d-flex">{{ details.site }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="w-175px">
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img
                      class=""
                      src="./assets/images/icons/calendar.svg"
                      alt=""
                    />
                  </div>
                  {{ details.startDate | date : "MMM dd" }} -
                  {{ details.endDate | date : "dd MMM, yyyy" }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/coin.svg" alt="" />
                  </div>
                  {{ details.jobKind }}
                </div>
                <div>
                  <div class="w-20px display-inline my-1 me-1">
                    <img class="" src="./assets/images/icons/case.svg" alt="" />
                  </div>
                  {{ details.type }}
                </div>
                <div class="mt-4 d-flex">
                  <div class="symbol symbol-35px symbol-circle me-3">
                    <img
                      [src]="
                        details.profile ||
                        '../../../assets/media/avatars/300-12.jpg'
                      "
                      alt="profile-pic"
                    />
                  </div>
                  <div>
                    <span class="d-flex text-muted fs-8">Worker</span>
                    <span class="fw-bold d-flex s-"
                      >{{ details.jobApplicationDetails?.firstName }}
                      {{ details.jobApplicationDetails?.lastName }}</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>

    <div
      *ngIf="apiLoad && jobDetails.length === 0"
      class="fw-semibold fs-3 min-h-sm-350px d-flex align-items-center justify-content-center"
    >
      No Records Found
    </div>

    <mat-paginator
      *ngIf="jobDetails.length > 0"
      [pageSize]="pageSize"
      [pageSizeOptions]="[5, 10, 20, 30]"
      [length]="totalJobCount"
      (page)="onPageChange($event)"
    >
    </mat-paginator>
  </div>
</div> -->
